# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Flutter

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### Backend
- ‚úÖ **API Gateway** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ—Ä—Ç `3011` —Å CORS –¥–ª—è Flutter
- ‚úÖ **Auth Service** (–ø–æ—Ä—Ç `3001`) –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/auth/*`
- ‚úÖ **Vocabulary Service** (–ø–æ—Ä—Ç `3003`) –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/vocabulary/*`
- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ
- ‚úÖ Endpoint'—ã –¥–ª—è speech recognition –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è

### Flutter
- ‚úÖ –ú–æ–¥–µ–ª—å `User` –∏ `AuthResponse`
- ‚úÖ `ApiService` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JWT —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ `AuthProvider` –¥–ª—è state management
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ `SharedPreferences`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ 401
- ‚úÖ –≠–∫—Ä–∞–Ω—ã **Login** –∏ **Register**
- ‚úÖ **Splash Screen** —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (redirect –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend —Å–µ—Ä–≤–∏—Å—ã

**–í PowerShell (–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞):**

```powershell
# Terminal 1: API Gateway (–ø–æ—Ä—Ç 3011)
cd services/api-gateway
npm run start:dev

# Terminal 2: Auth Service (–ø–æ—Ä—Ç 3001)
cd services/auth-service
npm run start:dev

# Terminal 3: Vocabulary Service (–ø–æ—Ä—Ç 3003)
cd services/vocabulary-service
npm run start:dev
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:**
- API Gateway: http://localhost:3011
- Auth Service: http://localhost:3001
- Vocabulary Service: http://localhost:3003

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```powershell
cd mobile_app_flutter
flutter run -d chrome
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```powershell
.\run.ps1
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ **Splash Screen**
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
3. –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω **Login**

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –ù–∞ —ç–∫—Ä–∞–Ω–µ Login –Ω–∞–∂–º–∏—Ç–µ **"Inscription"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Pr√©nom** (–∏–º—è)
   - **Nom** (—Ñ–∞–º–∏–ª–∏—è)
   - **Email**
   - **Mot de passe** (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
   - **Confirmer le mot de passe**
3. –ù–∞–∂–º–∏—Ç–µ **"S'inscrire"**
4. –¢–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
5. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

### –í—Ö–æ–¥
1. –ù–∞ —ç–∫—Ä–∞–Ω–µ Login –≤–≤–µ–¥–∏—Ç–µ:
   - **Email**
   - **Mot de passe**
2. –ù–∞–∂–º–∏—Ç–µ **"Se connecter"**
3. –¢–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
4. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω ‚Üí —Å—Ä–∞–∑—É –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh
- –ï—Å–ª–∏ refresh –Ω–µ —É–¥–∞–ª—Å—è ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ Login

### –í—ã—Ö–æ–¥
- –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –Ω–∞–∂–º–∏—Ç–µ –∏–∫–æ–Ω–∫—É **üö™ Logout**
- –¢–æ–∫–µ–Ω—ã —É–¥–∞–ª—è—Ç—Å—è
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω Login

## üîë –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤

### Access Token
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏: **15 –º–∏–Ω—É—Ç** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ auth-service)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`

### Refresh Token
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏: **7 –¥–Ω–µ–π** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ auth-service)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access —Ç–æ–∫–µ–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 401 –æ—à–∏–±–∫–∏

### –•—Ä–∞–Ω–µ–Ω–∏–µ
- –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `SharedPreferences` (–≤–µ–±: localStorage)
- –ö–ª—é—á–∏: `access_token`, `refresh_token`

## üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã, –∫—Ä–æ–º–µ `/login`, `/register` –∏ `/`, —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
- `/main` - –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- `/galaxies` - –°–ø–∏—Å–æ–∫ –≥–∞–ª–∞–∫—Ç–∏–∫
- `/galaxy/:name` - –°–ø–∏—Å–æ–∫ –ø–æ–¥—Ç–µ–º
- `/vocabulary/:galaxy/:subtopic` - –°–ª–æ–≤–∞—Ä—å
- `/word/:id` - –î–µ—Ç–∞–ª–∏ —Å–ª–æ–≤–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π redirect –Ω–∞ `/login`.

## üîß API Endpoints (—á–µ—Ä–µ–∑ Gateway)

### Auth
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥
- `POST /auth/refresh-token` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /auth/profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç JWT)

### Vocabulary
- `GET /vocabulary/lexicon?galaxy=X&subtopic=Y` - –ü–æ–ª—É—á–∏—Ç—å —Å–ª–æ–≤–∞ (—Ç—Ä–µ–±—É–µ—Ç JWT)
- `POST /vocabulary/lexicon` - –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ (—Ç—Ä–µ–±—É–µ—Ç JWT)
- `POST /vocabulary/speech/recognize` - –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ä–µ—á—å (—Ç—Ä–µ–±—É–µ—Ç JWT)

## üêõ Troubleshooting

### "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞" / "Utilisateur non trouv√©"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ auth-service –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ api-gateway –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3011
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (DevTools ‚Üí Console) –æ—à–∏–±–∫–∏

### "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ–≤–∞—Ä—è" / 401 Unauthorized
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ vocabulary-service –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3003
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã (—Ç–æ–∫–µ–Ω –≤ localStorage)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–π—Ç–∏ –∏ –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞

### "Failed to load resource: net::ERR_CONNECTION_REFUSED"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ 3 —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–ø—É—â–µ–Ω—ã:
  ```powershell
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
  netstat -ano | findstr "3001 3003 3011"
  ```

### –¢–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è / –ø–æ—Å—Ç–æ—è–Ω–Ω–æ logout
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Local Storage
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `access_token` –∏ `refresh_token`
- –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ login

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
mobile_app_flutter/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.dart             ‚Üê User, AuthResponse –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ word.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ galaxy.dart
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api_service.dart      ‚Üê API –∫–ª–∏–µ–Ω—Ç —Å JWT
‚îÇ   ‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_provider.dart    ‚Üê State management –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vocabulary_provider.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme_provider.dart
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login_screen.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ galaxy_selection_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subtopic_selection_screen.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vocabulary_screen.dart
‚îÇ   ‚îî‚îÄ‚îÄ main.dart                 ‚Üê Router —Å auth guards
‚îî‚îÄ‚îÄ AUTH_SETUP.md                 ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## ‚ú® –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏–Ω—ã (Google, etc.)

